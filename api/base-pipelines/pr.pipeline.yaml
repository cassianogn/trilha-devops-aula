parameters:
  - name: dotnet_version
    type: string
  - name: soluttion_path
    type: string
  - name: test_project_path
    type: string

steps:
   - checkout: self

   - script: |
      echo 'dotnet_version ${{parameters.dotnet_version}}'
      echo 'solution_path ${{parameters.solution_path}}'
      echo 'test_project_path ${{parameters.test_project_path}}'
     displayName: debug
   - task: UseDotNet@2
     displayName: "Use .NET SDK ${{parameters.dotnet_version}}"
     inputs:
       packageType: 'sdk'
       version: '${{parameters.dotnet_version}}'
 
   - task: DotNetCoreCLI@2
     displayName: "Restore"
     inputs:
       command: 'restore'
       projects: '${{parameters.soluttion_path}}'
 
   - task: DotNetCoreCLI@2
     displayName: "Build"
     inputs:
       command: 'build'
       projects: '${{parameters.soluttion_path}}'
       arguments: '--configuration Release --no-restore'
 
   - task: DotNetCoreCLI@2
     displayName: "Test"
     inputs:
       command: 'test'
       projects: '${{parameters.test_project_path}}'
       arguments: '--configuration Release --logger trx'
       publishTestResults: true